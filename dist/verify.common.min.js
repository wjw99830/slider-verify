"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tagOrAttrName=/[^><\/ ]+/,attrDoubleQuote=new RegExp(`${tagOrAttrName.source}="[^"]*"`),attrSingleQuote=new RegExp(`${tagOrAttrName.source}='[^']*'`),attrNoneQuote=new RegExp(`${tagOrAttrName.source}`),attr=new RegExp(`(${attrDoubleQuote.source})|(${attrSingleQuote.source})|(${attrNoneQuote.source})`),startTag=`<${tagOrAttrName.source}( +(${attr.source}))* *>`,beginTagStart=`^\\<(${tagOrAttrName.source})`,endTagStart=`^</(${tagOrAttrName.source})>`,comment=/^(<!--(.*?)-->)/;function parse(e){e=e.replace(/[\n\r]/g,"").trim();const t=[],r=[];for(;e;){let t,o,c,s;if(s=e.match(comment)){const e=new Node("comment");e.text=s[2],a(e),n(s[0].length)}else if(c=e.match(new RegExp(beginTagStart))){const t=c[1];let o=e.match(new RegExp(startTag))[0].length;const s=e.slice(0,o).replace(t,"").match(new RegExp(attr.source,"g")),g=new Node(t);s&&(g.attrs=s.map(e=>{let t=e.indexOf("=");return t=t<0?e.length:t,{key:e.slice(0,t).replace(/[:@]/,""),value:e.slice(t+1).replace(/[\"\'"]/g,"")}})),a(g),r.push(g),n(o)}else if(o=e.match(new RegExp(endTagStart)))r.pop(),n(o[0].length);else if(t=e.match(new RegExp("^[^<]*"))){const r=e.indexOf("<"),o=new Node("text");o.text=t[0],a(o),n(r)}}function n(t){e=e.slice(t)}function a(e){r.length?r[r.length-1].children.push(e):t.push(e)}return t}class Node{constructor(e){this.attrs=[],this.children=[],this.tag=e}}const generate=e=>{const t=document.createDocumentFragment();for(const r of e)if("text"===r.tag){const e=document.createTextNode(r.text);t.appendChild(e)}else if("comment"===r.tag){const e=document.createComment(r.text);t.appendChild(e)}else{const e=document.createElement(r.tag);for(const t of r.attrs)e.setAttribute(t.key,t.value);e.appendChild(generate(r.children)),t.appendChild(e)}return t};function toDOM(e){const t=parse(e);return generate(t)}exports.generate=generate,exports.parse=parse,exports.toDOM=toDOM;
